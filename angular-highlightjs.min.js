/*! angular-highlightjs
version: 0.0.1
build date: 2013-07-23
author: Robin Fan
https://github.com/pc035860/angular-highlightjs.git */
angular.module("hljs",[]).controller("HljsCtrl",["$timeout",function(a){var b=this,c=null,d=null,e=null;b.init=function(a){c=a},b.setLanguage=function(a){d=a,e&&b.highlight(e)},b.highlight=function(b){if(c){var f;e=b,f=d?hljs.highlight(d,e,!0):hljs.highlightAuto(e),a(function(){c.html(f.value)})}},b.clear=function(){c&&(e=null,c.text(""))},b.release=function(){c=null}}]).directive("hljs",[function(){return{restrict:"EA",controller:"HljsCtrl",compile:function(a){var b=a[0].innerHTML.replace(/^\r\n|\r|\n/,"");return a.html("<pre><code></code></pre>"),function(a,c,d,e){e.init(c.find("code")),b&&e.highlight(b),a.$on("$destroy",function(){e.release()})}}}}]).directive("language",[function(){return{require:"hljs",restrict:"A",link:function(a,b,c,d){c.$observe("language",function(a){angular.isDefined(a)&&d.setLanguage(a)})}}}]).directive("source",[function(){return{require:"hljs",restrict:"A",link:function(a,b,c,d){a.$watch(c.source,function(a){a?d.highlight(a):d.clear()})}}}]).directive("include",["$http","$templateCache","$q",function(a,b,c){return{require:"hljs",restrict:"A",compile:function(d,e){var f=e.include;return function(d,e,g,h){var i=0;d.$watch(f,function(d){var e=++i;if(d&&angular.isString(d)){var f,g;f=b.get(d),f||(g=c.defer(),a.get(d,{cache:b}).success(function(a){e===i&&g.resolve(a)}).error(function(){e===i&&h.clear(),g.resolve()}),f=g.promise),c.when(f).then(function(a){a&&(angular.isArray(a)&&(a=a[1]),a=a.replace(/^\r\n|\r|\n/,""),h.highlight(a))})}else h.clear()})}}}}]);