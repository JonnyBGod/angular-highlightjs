/*! angular-highlightjs
version: 0.2.5
build date: 2014-02-27
author: Robin Fan
https://github.com/pc035860/angular-highlightjs.git */
!function(a,b){"function"==typeof define&&define.amd?define(["exports","angular","highlight.js"],b):"object"==typeof exports?b(exports,require("angular"),require("highlight.js")):b(a.commonJsStrict={},a.angular,a.hljs)}(this,function(a,b,c){b.module("hljs",[]).provider("hljsService",function(){var a={};return{setOptions:function(c){b.extend(a,c)},getOptions:function(){return b.copy(a)},$get:function(){return(c.configure||b.noop)(a),c}}}).factory("hljsCache",["$cacheFactory",function(a){return a("hljsCache")}]).controller("HljsCtrl",["hljsCache","hljsService",function(a,c){var d=this,e=null,f=null,g=null,h=null;d.init=function(a){e=a},d.setLanguage=function(a){f=a,g&&d.highlight(g)},d.highlightCallback=function(a){h=a},d.highlight=function(i){if(e){var j,k;g=i,f?(k=d._cacheKey(f,g),j=a.get(k),j||(j=c.highlight(f,c.fixMarkup(g),!0),a.put(k,j))):(k=d._cacheKey(g),j=a.get(k),j||(j=c.highlightAuto(c.fixMarkup(g)),a.put(k,j))),e.html(j.value),null!==h&&b.isFunction(h)&&h()}},d.clear=function(){e&&(g=null,e.text(""))},d.release=function(){e=null},d._cacheKey=function(){var a=Array.prototype.slice.call(arguments),b="!angular-highlightjs!";return a.join(b)}}]).directive("hljs",[function(){return{restrict:"EA",controller:"HljsCtrl",compile:function(a){var b=a[0].innerHTML.replace(/^(\r\n|\r|\n)/m,"");return a.html('<pre><code class="hljs"></code></pre>'),function(a,c,d,e){e.init(c.find("code")),d.onhighlight&&e.highlightCallback(function(){a.$eval(d.onhighlight)}),b&&e.highlight(b),a.$on("$destroy",function(){e.release()})}}}}]).directive("language",[function(){return{require:"hljs",restrict:"A",link:function(a,c,d,e){d.$observe("language",function(a){b.isDefined(a)&&e.setLanguage(a)})}}}]).directive("source",[function(){return{require:"hljs",restrict:"A",link:function(a,b,c,d){a.$watch(c.source,function(a){a?d.highlight(a):d.clear()})}}}]).directive("include",["$http","$templateCache","$q",function(a,c,d){return{require:"hljs",restrict:"A",compile:function(e,f){var g=f.include;return function(e,f,h,i){var j=0;e.$watch(g,function(e){var f=++j;if(e&&b.isString(e)){var g,h;g=c.get(e),g||(h=d.defer(),a.get(e,{cache:c,transformResponse:function(a){return a}}).success(function(a){f===j&&h.resolve(a)}).error(function(){f===j&&i.clear(),h.resolve()}),g=h.promise),d.when(g).then(function(a){a&&(b.isArray(a)?a=a[1]:b.isObject(a)&&(a=a.data),a=a.replace(/^(\r\n|\r|\n)/m,""),i.highlight(a))})}else i.clear()})}}}}])});